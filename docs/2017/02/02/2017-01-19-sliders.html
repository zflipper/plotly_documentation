<h3>New to Plotly?</h3>

<p>Plotly&#39;s R library is free and open source!<br>
<a href="https://plot.ly/r/getting-started/">Get started</a> by downloading the client and <a href="https://plot.ly/r/getting-started/">reading the primer</a>.<br>
You can set up Plotly to work in <a href="https://plot.ly/r/getting-started/#hosting-graphs-in-your-online-plotly-account">online</a> or <a href="https://plot.ly/r/offline/">offline</a> mode.<br>
We also have a quick-reference <a href="https://images.plot.ly/plotly-documentation/images/r_cheat_sheet.pdf">cheatsheet</a> (new!) to help you get started!</p>

<h3>Version Check</h3>

<p>Version 4 of Plotly&#39;s R package is now <a href="https://plot.ly/r/getting-started/#installation">available</a>!<br>
Check out <a href="http://moderndata.plot.ly/upgrading-to-plotly-4-0-and-above/">this post</a> for more information on breaking changes and new features available in this version.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s1">'plotly'</span><span class="p">)</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## [1] '4.5.6.9000'
</code></pre></div>
<h3>Basic Slider Control</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">

</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"5"</span><span class="p">),</span><span class="w"> 
                 </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1"</span><span class="p">))</span><span class="w"> 

</span><span class="c1"># create steps for slider
</span><span class="n">steps</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="s2">"marker.color"</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">),</span><span class="w"> 
                    </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Red"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restyle"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
                    </span><span class="p">),</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="s2">"marker.color"</span><span class="p">,</span><span class="w"> </span><span class="s2">"green"</span><span class="p">),</span><span class="w"> 
                    </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Green"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restyle"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
                    </span><span class="p">),</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="s2">"marker.color"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">),</span><span class="w"> 
                    </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Blue"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"restyle"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
                    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">

</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">y</span><span class="p">,</span><span class="w">
          </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"markers"</span><span class="p">,</span><span class="w"> 
          </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w">
                        </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'green'</span><span class="p">),</span><span class="w"> 
          </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Basic Slider"</span><span class="p">,</span><span class="w">
         </span><span class="n">sliders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
           </span><span class="nf">list</span><span class="p">(</span><span class="w">
             </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> 
             </span><span class="n">currentvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Color: "</span><span class="p">),</span><span class="w"> 
             </span><span class="n">pad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> 
             </span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">steps</span><span class="p">)))</span><span class="w"> 

</span><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"sliders/basic"</span><span class="p">)</span><span class="w">
</span><span class="n">chart_link</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/4288.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h3>Sine Wave Slider</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">

</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span><span class="w">

</span><span class="c1"># create data
</span><span class="n">aval</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="p">(</span><span class="n">step</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">11</span><span class="p">){</span><span class="w">
  </span><span class="n">aval</span><span class="p">[[</span><span class="n">step</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">list</span><span class="p">(</span><span class="n">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
                      </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s1">'v = '</span><span class="p">,</span><span class="w"> </span><span class="n">step</span><span class="p">),</span><span class="w">
                      </span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="w">
                      </span><span class="n">y</span><span class="o">=</span><span class="nf">sin</span><span class="p">(</span><span class="n">step</span><span class="o">*</span><span class="n">x</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">aval</span><span class="p">[</span><span class="m">3</span><span class="p">][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="w">

</span><span class="c1"># create steps and plot all traces
</span><span class="n">steps</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">11</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">add_lines</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="n">aval</span><span class="p">[</span><span class="n">i</span><span class="p">][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">x</span><span class="p">,</span><span class="w">  </span><span class="n">y</span><span class="o">=</span><span class="n">aval</span><span class="p">[</span><span class="n">i</span><span class="p">][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">visible</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aval</span><span class="p">[</span><span class="n">i</span><span class="p">][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">visible</span><span class="p">,</span><span class="w"> 
                 </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aval</span><span class="p">[</span><span class="n">i</span><span class="p">][[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'scatter'</span><span class="p">,</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'lines'</span><span class="p">,</span><span class="w"> </span><span class="n">hoverinfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'name'</span><span class="p">,</span><span class="w"> 
                 </span><span class="n">line</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">'00CED1'</span><span class="p">),</span><span class="w"> </span><span class="n">showlegend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

  </span><span class="n">step</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="s1">'visible'</span><span class="p">,</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">aval</span><span class="p">))),</span><span class="w">
               </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'restyle'</span><span class="p">)</span><span class="w">
  </span><span class="n">step</span><span class="o">$</span><span class="n">args</span><span class="p">[[</span><span class="m">2</span><span class="p">]][</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="w">  
  </span><span class="n">steps</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">step</span><span class="w"> 
</span><span class="p">}</span><span class="w">  

</span><span class="c1"># add slider control to plot
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">sliders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
                             </span><span class="n">currentvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Frequency: "</span><span class="p">),</span><span class="w">
                             </span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">steps</span><span class="p">)))</span><span class="w">

</span><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"sliders/sine-slider"</span><span class="p">)</span><span class="w">
</span><span class="n">chart_link</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/4290.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h3>Mulitple Slider Controls</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">

</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/plotly/datasets/master/globe_contours.csv'</span><span class="p">)</span><span class="w">
</span><span class="n">df</span><span class="o">$</span><span class="n">id</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">seq_len</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">))</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">d</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">gather</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">separate</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"l"</span><span class="p">,</span><span class="w"> </span><span class="s2">"line"</span><span class="p">),</span><span class="w"> </span><span class="s2">"\\."</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">spread</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w">

</span><span class="n">geo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="n">showland</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">showlakes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">showcountries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">showocean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
  </span><span class="n">countrywidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w">
  </span><span class="n">landcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'rgb(230, 145, 56)'</span><span class="p">,</span><span class="w">
  </span><span class="n">lakecolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'rgb(0, 255, 255)'</span><span class="p">,</span><span class="w">
  </span><span class="n">oceancolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'rgb(0, 255, 255)'</span><span class="p">,</span><span class="w">
  </span><span class="n">projection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'orthographic'</span><span class="p">,</span><span class="w">
    </span><span class="n">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
      </span><span class="n">lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-100</span><span class="p">,</span><span class="w">
      </span><span class="n">lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w">
      </span><span class="n">roll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w">
    </span><span class="p">)</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">lonaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="n">showgrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
    </span><span class="n">gridcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toRGB</span><span class="p">(</span><span class="s2">"gray40"</span><span class="p">),</span><span class="w">
    </span><span class="n">gridwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">),</span><span class="w">
  </span><span class="n">lataxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="n">showgrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
    </span><span class="n">gridcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toRGB</span><span class="p">(</span><span class="s2">"gray40"</span><span class="p">),</span><span class="w">
    </span><span class="n">gridwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="c1">## add custom events
</span><span class="w">
</span><span class="c1"># dropdown
</span><span class="n">projections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"equirectangular"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mercator"</span><span class="p">,</span><span class="w"> </span><span class="s2">"orthographic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"natural earth"</span><span class="p">,</span><span class="s2">"kavrayskiy7"</span><span class="p">,</span><span class="w"> 
                                  </span><span class="s2">"miller"</span><span class="p">,</span><span class="w"> </span><span class="s2">"robinson"</span><span class="p">,</span><span class="w"> </span><span class="s2">"eckert4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"azimuthal equal area"</span><span class="p">,</span><span class="s2">"azimuthal equidistant"</span><span class="p">,</span><span class="w"> 
                                  </span><span class="s2">"conic equal area"</span><span class="p">,</span><span class="w"> </span><span class="s2">"conic conformal"</span><span class="p">,</span><span class="w"> </span><span class="s2">"conic equidistant"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gnomonic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"stereographic"</span><span class="p">,</span><span class="w"> 
                                  </span><span class="s2">"mollweide"</span><span class="p">,</span><span class="w"> </span><span class="s2">"hammer"</span><span class="p">,</span><span class="w"> </span><span class="s2">"transverse mercator"</span><span class="p">,</span><span class="w"> </span><span class="s2">"albers usa"</span><span class="p">,</span><span class="w"> </span><span class="s2">"winkel tripel"</span><span class="p">))</span><span class="w">

</span><span class="n">all_buttons</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">projections</span><span class="p">[,]))</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">all_buttons</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"relayout"</span><span class="p">,</span><span class="w">
                           </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">geo.projection.type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">projections</span><span class="o">$</span><span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span><span class="w">
                           </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">projections</span><span class="o">$</span><span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># sliders
</span><span class="n">lon_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="m">-180</span><span class="p">,</span><span class="w"> </span><span class="m">180</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">
</span><span class="n">lat_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="m">-90</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">
</span><span class="n">colnames</span><span class="p">(</span><span class="n">lon_range</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"x"</span><span class="w">
</span><span class="n">colnames</span><span class="p">(</span><span class="n">lat_range</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"x"</span><span class="w">

</span><span class="n">all_lat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">lat_range</span><span class="p">[,]))</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">all_lat</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"relayout"</span><span class="p">,</span><span class="w">
                       </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">geo.projection.rotation.lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat_range</span><span class="o">$</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span><span class="w">
                       </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat_range</span><span class="o">$</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">all_lon</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">lon_range</span><span class="p">[,]))</span><span class="w"> </span><span class="p">{</span><span class="w">  
  </span><span class="n">all_lon</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"relayout"</span><span class="p">,</span><span class="w"> 
                       </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">geo.projection.rotation.lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon_range</span><span class="o">$</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span><span class="w">
                       </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon_range</span><span class="o">$</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> 
</span><span class="p">}</span><span class="w"> 

</span><span class="c1"># annotations
</span><span class="n">annot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Projection"</span><span class="p">,</span><span class="w"> </span><span class="n">yanchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'bottom'</span><span class="p">,</span><span class="w"> 
              </span><span class="n">xref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'paper'</span><span class="p">,</span><span class="w"> </span><span class="n">xanchor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'right'</span><span class="p">,</span><span class="w">
              </span><span class="n">showarrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">


</span><span class="c1"># original d3-globe with contours
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_geo</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_lines</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Reds'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="w">
    </span><span class="n">showlegend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">geo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">geo</span><span class="w">
  </span><span class="p">)</span><span class="w">

</span><span class="c1"># plot with custom events
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">layout</span><span class="p">(</span><span class="n">annotations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">annot</span><span class="p">,</span><span class="w">
         </span><span class="n">updatemenus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w"> 
                                 </span><span class="n">buttons</span><span class="o">=</span><span class="n">all_buttons</span><span class="p">)),</span><span class="w">
         </span><span class="n">sliders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">

           </span><span class="nf">list</span><span class="p">(</span><span class="w">
             </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">lon_range</span><span class="p">[,])</span><span class="m">-1</span><span class="p">)</span><span class="o">/</span><span class="m">2</span><span class="p">,</span><span class="w"> 
             </span><span class="n">currentvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Longitude: "</span><span class="p">),</span><span class="w"> 
             </span><span class="n">pad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">),</span><span class="w"> 

             </span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_lon</span><span class="p">),</span><span class="w">

           </span><span class="nf">list</span><span class="p">(</span><span class="w">
             </span><span class="n">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">lat_range</span><span class="p">[,])</span><span class="m">-1</span><span class="p">)</span><span class="o">/</span><span class="m">2</span><span class="p">,</span><span class="w"> 
             </span><span class="n">currentvalue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Latitude: "</span><span class="p">),</span><span class="w"> 
             </span><span class="n">pad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">),</span><span class="w"> 

             </span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_lat</span><span class="p">)))</span><span class="w">

</span><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"sliders/d3-globe"</span><span class="p">)</span><span class="w">
</span><span class="n">chart_link</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/4292.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h1>Reference</h1>

<p>See <a href="https://plot.ly/r/reference/#layout-updatemenus">https://plot.ly/r/reference/#layout-updatemenus</a> for more information and options!</p>
