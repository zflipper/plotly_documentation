var url = "https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson";

Plotly.d3.json(url, (err, raw) => {
  var lon = raw.features.map(f => f.geometry.coordinates[0]);
  var lat = raw.features.map(f => f.geometry.coordinates[1]);
  var z = raw.features.map(f => f.properties.mag);

  var data = [
    { type: "scattermapbox", lon: lon, lat: lat, z: z, hoverinfo: "y" }
  ];

  var layout = {
    mapbox: { style: "dark", zoom: 2, center: { lon: -150, lat: 60 } },
    margin: { t: 0, b: 0 }
  };

  var config = {
    mapboxAccessToken:
      "pk.eyJ1IjoiZXRwaW5hcmQiLCJhIjoiY2luMHIzdHE0MGFxNXVubTRxczZ2YmUxaCJ9.hwWZful0U2CQxit4ItNsiQ"
  };

  Plotly.newPlot("graph", data, layout, config);
});
