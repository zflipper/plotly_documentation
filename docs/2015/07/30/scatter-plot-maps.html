<h1>Scatter Plots on Maps in R | Examples | Plotly</h1>

<h1>US Airports Map in R</h1>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="n">read.csv</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/plotly/datasets/master/2011_february_us_airport_traffic.csv'</span><span class="p">)</span>

<span class="c1"># geo styling
</span><span class="n">g</span> <span class="o">&lt;-</span> <span class="n">list</span><span class="p">(</span>
  <span class="n">scope</span> <span class="o">=</span> <span class="s1">'usa'</span><span class="p">,</span>
  <span class="n">projection</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">type</span> <span class="o">=</span> <span class="s1">'albers usa'</span><span class="p">),</span>
  <span class="n">showland</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
  <span class="n">landcolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"gray95"</span><span class="p">),</span>
  <span class="n">subunitcolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"gray85"</span><span class="p">),</span>
  <span class="n">countrycolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"gray85"</span><span class="p">),</span>
  <span class="n">countrywidth</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span>
  <span class="n">subunitwidth</span> <span class="o">=</span> <span class="m">0.5</span>
<span class="p">)</span>

<span class="n">plot_geo</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="o">~</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="o">~</span><span class="n">long</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">add_markers</span><span class="p">(</span>
    <span class="n">text</span> <span class="o">=</span> <span class="o">~</span><span class="n">paste</span><span class="p">(</span><span class="n">airport</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">paste</span><span class="p">(</span><span class="s2">"Arrivals:"</span><span class="p">,</span> <span class="n">cnt</span><span class="p">),</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">),</span> 
    <span class="n">color</span> <span class="o">=</span> <span class="o">~</span><span class="n">cnt</span><span class="p">,</span> <span class="n">symbol</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s2">"square"</span><span class="p">),</span> <span class="n">size</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="m">8</span><span class="p">),</span> <span class="n">hoverinfo</span> <span class="o">=</span> <span class="s2">"text"</span>
  <span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">colorbar</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s2">"Incoming flights&lt;br /&gt;February 2011"</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layout</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s1">'Most trafficked US airports&lt;br /&gt;(Hover for airport)'</span><span class="p">,</span> <span class="n">geo</span> <span class="o">=</span> <span class="n">g</span>
  <span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">plotly_POST</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s2">"maps/traffic"</span><span class="p">)</span>
</code></pre></div>
<h3>North American Precipitation Map from NOAA</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="n">read.csv</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/plotly/datasets/master/2015_06_30_precipitation.csv'</span><span class="p">)</span>

<span class="c1"># change default color scale title
</span><span class="n">m</span> <span class="o">&lt;-</span> <span class="n">list</span><span class="p">(</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s2">"Total Inches"</span><span class="p">))</span>

<span class="c1"># geo styling
</span><span class="n">g</span> <span class="o">&lt;-</span> <span class="n">list</span><span class="p">(</span>
  <span class="n">scope</span> <span class="o">=</span> <span class="s1">'north america'</span><span class="p">,</span>
  <span class="n">showland</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
  <span class="n">landcolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"grey83"</span><span class="p">),</span>
  <span class="n">subunitcolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"white"</span><span class="p">),</span>
  <span class="n">countrycolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"white"</span><span class="p">),</span>
  <span class="n">showlakes</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
  <span class="n">lakecolor</span> <span class="o">=</span> <span class="n">toRGB</span><span class="p">(</span><span class="s2">"white"</span><span class="p">),</span>
  <span class="n">showsubunits</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
  <span class="n">showcountries</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
  <span class="n">resolution</span> <span class="o">=</span> <span class="m">50</span><span class="p">,</span>
  <span class="n">projection</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span>
    <span class="n">type</span> <span class="o">=</span> <span class="s1">'conic conformal'</span><span class="p">,</span>
    <span class="n">rotation</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="m">-100</span><span class="p">)</span>
  <span class="p">),</span>
  <span class="n">lonaxis</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span>
    <span class="n">showgrid</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">gridwidth</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span>
    <span class="n">range</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">-140</span><span class="p">,</span> <span class="m">-55</span><span class="p">),</span>
    <span class="n">dtick</span> <span class="o">=</span> <span class="m">5</span>
  <span class="p">),</span>
  <span class="n">lataxis</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span>
    <span class="n">showgrid</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">,</span>
    <span class="n">gridwidth</span> <span class="o">=</span> <span class="m">0.5</span><span class="p">,</span>
    <span class="n">range</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">60</span><span class="p">),</span>
    <span class="n">dtick</span> <span class="o">=</span> <span class="m">5</span>
  <span class="p">)</span>
<span class="p">)</span>

<span class="n">plot_geo</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lat</span> <span class="o">=</span> <span class="o">~</span><span class="n">Lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="o">~</span><span class="n">Lon</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="o">~</span><span class="n">Globvalue</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">add_markers</span><span class="p">(</span>
    <span class="n">text</span> <span class="o">=</span> <span class="o">~</span><span class="n">paste</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">Globvalue</span><span class="p">,</span> <span class="s2">"inches"</span><span class="p">),</span> <span class="n">hoverinfo</span> <span class="o">=</span> <span class="s2">"text"</span>
  <span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layout</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s1">'US Precipitation 06-30-2015&lt;br&gt;Source: NOAA'</span><span class="p">,</span> <span class="n">geo</span> <span class="o">=</span> <span class="n">g</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">plotly_POST</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s2">"maps/noaa"</span><span class="p">)</span>
</code></pre></div>