<h1>3D Surface Plots in R</h1>

<h3>New to Plotly?</h3>

<p>Plotly&#39;s R library is free and open source!<br>
<a href="https://plot.ly/r/getting-started/">Get started</a> by downloading the client and <a href="https://plot.ly/r/getting-started/">reading the primer</a>.<br>
You can set up Plotly to work in <a href="https://plot.ly/r/getting-started/#hosting-graphs-in-your-online-plotly-account">online</a> or <a href="https://plot.ly/r/offline/">offline</a> mode.<br>
We also have a quick-reference <a href="https://images.plot.ly/plotly-documentation/images/r_cheat_sheet.pdf">cheatsheet</a> (new!) to help you get started!</p>

<h3>Version Check</h3>

<p>Version 4 of Plotly&#39;s R package is now <a href="https://plot.ly/r/getting-started/#installation">available</a>!<br>
Check out <a href="http://moderndata.plot.ly/upgrading-to-plotly-4-0-and-above/">this post</a> for more information on breaking changes and new features available in this version.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s1">'plotly'</span><span class="p">)</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## [1] '4.5.2'
</code></pre></div>
<h1>3D Surface Plots in R</h1>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">
</span><span class="c1"># volcano is a numeric matrix that ships with R
</span><span class="n">plot_ly</span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">volcano</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">add_surface</span><span class="p">()</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3380.embed" width="800" height="800" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h3>2D Kernel Density Estimation</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">kd</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">with</span><span class="p">(</span><span class="n">MASS</span><span class="o">::</span><span class="n">geyser</span><span class="p">,</span><span class="w"> </span><span class="n">MASS</span><span class="o">::</span><span class="n">kde2d</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">))</span><span class="w">
</span><span class="n">plot_ly</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kd</span><span class="o">$</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kd</span><span class="o">$</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kd</span><span class="o">$</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">add_surface</span><span class="p">()</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3382.embed" width="800" height="800" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h3>Multiple Surfaces</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.83</span><span class="p">,</span><span class="m">8.89</span><span class="p">,</span><span class="m">8.81</span><span class="p">,</span><span class="m">8.87</span><span class="p">,</span><span class="m">8.9</span><span class="p">,</span><span class="m">8.87</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.89</span><span class="p">,</span><span class="m">8.94</span><span class="p">,</span><span class="m">8.85</span><span class="p">,</span><span class="m">8.94</span><span class="p">,</span><span class="m">8.96</span><span class="p">,</span><span class="m">8.92</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.84</span><span class="p">,</span><span class="m">8.9</span><span class="p">,</span><span class="m">8.82</span><span class="p">,</span><span class="m">8.92</span><span class="p">,</span><span class="m">8.93</span><span class="p">,</span><span class="m">8.91</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.79</span><span class="p">,</span><span class="m">8.85</span><span class="p">,</span><span class="m">8.79</span><span class="p">,</span><span class="m">8.9</span><span class="p">,</span><span class="m">8.94</span><span class="p">,</span><span class="m">8.92</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.79</span><span class="p">,</span><span class="m">8.88</span><span class="p">,</span><span class="m">8.81</span><span class="p">,</span><span class="m">8.9</span><span class="p">,</span><span class="m">8.95</span><span class="p">,</span><span class="m">8.92</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.8</span><span class="p">,</span><span class="m">8.82</span><span class="p">,</span><span class="m">8.78</span><span class="p">,</span><span class="m">8.91</span><span class="p">,</span><span class="m">8.94</span><span class="p">,</span><span class="m">8.92</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.75</span><span class="p">,</span><span class="m">8.78</span><span class="p">,</span><span class="m">8.77</span><span class="p">,</span><span class="m">8.91</span><span class="p">,</span><span class="m">8.95</span><span class="p">,</span><span class="m">8.92</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.8</span><span class="p">,</span><span class="m">8.8</span><span class="p">,</span><span class="m">8.77</span><span class="p">,</span><span class="m">8.91</span><span class="p">,</span><span class="m">8.95</span><span class="p">,</span><span class="m">8.94</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.74</span><span class="p">,</span><span class="m">8.81</span><span class="p">,</span><span class="m">8.76</span><span class="p">,</span><span class="m">8.93</span><span class="p">,</span><span class="m">8.98</span><span class="p">,</span><span class="m">8.99</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.89</span><span class="p">,</span><span class="m">8.99</span><span class="p">,</span><span class="m">8.92</span><span class="p">,</span><span class="m">9.1</span><span class="p">,</span><span class="m">9.13</span><span class="p">,</span><span class="m">9.11</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.97</span><span class="p">,</span><span class="m">8.97</span><span class="p">,</span><span class="m">8.91</span><span class="p">,</span><span class="m">9.09</span><span class="p">,</span><span class="m">9.11</span><span class="p">,</span><span class="m">9.11</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">9.04</span><span class="p">,</span><span class="m">9.08</span><span class="p">,</span><span class="m">9.05</span><span class="p">,</span><span class="m">9.25</span><span class="p">,</span><span class="m">9.28</span><span class="p">,</span><span class="m">9.27</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">9</span><span class="p">,</span><span class="m">9.01</span><span class="p">,</span><span class="m">9</span><span class="p">,</span><span class="m">9.2</span><span class="p">,</span><span class="m">9.23</span><span class="p">,</span><span class="m">9.2</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.99</span><span class="p">,</span><span class="m">8.99</span><span class="p">,</span><span class="m">8.98</span><span class="p">,</span><span class="m">9.18</span><span class="p">,</span><span class="m">9.2</span><span class="p">,</span><span class="m">9.19</span><span class="p">),</span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="m">8.93</span><span class="p">,</span><span class="m">8.97</span><span class="p">,</span><span class="m">8.97</span><span class="p">,</span><span class="m">9.18</span><span class="p">,</span><span class="m">9.2</span><span class="p">,</span><span class="m">9.18</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">15</span><span class="p">,</span><span class="m">6</span><span class="p">)</span><span class="w">
</span><span class="n">z</span><span class="m">2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="n">z</span><span class="m">3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="n">plot_ly</span><span class="p">(</span><span class="n">showscale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_surface</span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_surface</span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">z</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.98</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_surface</span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">z</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.98</span><span class="p">)</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3384.embed" width="800" height="800" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>
