<h1>2D Histograms in R | Examples | Plotly</h1>

<h3>New to Plotly?</h3>

<p>Plotly&#39;s R library is free and open source!<br>
<a href="https://plot.ly/r/getting-started/">Get started</a> by downloading the client and <a href="https://plot.ly/r/getting-started/">reading the primer</a>.<br>
You can set up Plotly to work in <a href="https://plot.ly/r/getting-started/#hosting-graphs-in-your-online-plotly-account">online</a> or <a href="https://plot.ly/r/offline/">offline</a> mode.<br>
We also have a quick-reference <a href="https://images.plot.ly/plotly-documentation/images/r_cheat_sheet.pdf">cheatsheet</a> (new!) to help you get started!</p>

<h3>Version Check</h3>

<p>Version 4 of Plotly&#39;s R package is now <a href="https://plot.ly/r/getting-started/#installation">available</a>!<br>
Check out <a href="http://moderndata.plot.ly/upgrading-to-plotly-4-0-and-above/">this post</a> for more information on breaking changes and new features available in this version.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">
</span><span class="n">packageVersion</span><span class="p">(</span><span class="s1">'plotly'</span><span class="p">)</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## [1] '4.5.2'
</code></pre></div>
<h4>Basic 2D Histogram</h4>

<p>2D histograms require <code>x</code>/<code>y</code>, but in contrast to heatmaps, <code>z</code> is optional. If <code>z</code> is not provided, binning occurs in the browser (see <a href="https://plot.ly/r/reference/#histogram2d-histnorm">here</a> for a list of binning options).</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># install.packages('mvtnorm')
</span><span class="n">library</span><span class="p">(</span><span class="n">plotly</span><span class="p">)</span><span class="w">

</span><span class="n">s</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">-.75</span><span class="p">,</span><span class="w"> </span><span class="m">-.75</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="n">obs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mvtnorm</span><span class="o">::</span><span class="n">rmvnorm</span><span class="p">(</span><span class="m">500</span><span class="p">,</span><span class="w"> </span><span class="n">sigma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obs</span><span class="p">[,</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obs</span><span class="p">[,</span><span class="m">2</span><span class="p">])</span><span class="w">
</span><span class="n">subplot</span><span class="p">(</span><span class="w">
  </span><span class="n">p</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">add_markers</span><span class="p">(</span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w">
  </span><span class="n">p</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">add_histogram2d</span><span class="p">()</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## Error in loadNamespace(name): there is no package called 'webshot'
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## Error in loadNamespace(name): there is no package called 'webshot'
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"histogram2d/basic"</span><span class="p">)</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3430.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h4>Colorscale</h4>

<p>If <code>z</code> is not provided, the only way to control coloring is through the <a href="https://plot.ly/r/reference/#histogram2d-colorscale">colorscale attribute</a></p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">add_histogram2d</span><span class="p">(</span><span class="n">colorscale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Blues"</span><span class="p">)</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## Error in loadNamespace(name): there is no package called 'webshot'
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## Error in loadNamespace(name): there is no package called 'webshot'
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"histogram2d/colorscale"</span><span class="p">)</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3045.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>

<h4>Z Matrix</h4>

<p>If you want more control for the binning algorithm, you can supply a 2D table or matrix to <code>z</code>. In this case, the R package will impose it&#39;s colorscale default (and the <code>colors</code> argument can be used to control the colorscale from R):</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">cnt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">with</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span><span class="w"> </span><span class="n">table</span><span class="p">(</span><span class="n">cut</span><span class="p">,</span><span class="w"> </span><span class="n">clarity</span><span class="p">))</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">(</span><span class="n">diamonds</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">cut</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">clarity</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">cnt</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">add_histogram2d</span><span class="p">()</span><span class="w">
</span><span class="n">p</span><span class="w">
</span></code></pre></div><div class="highlight"><pre><code class="language-" data-lang="">## Error in loadNamespace(name): there is no package called 'webshot'
</code></pre></div><div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Create a shareable link to your chart
# Set up API credentials: https://plot.ly/r/getting-started
</span><span class="n">chart_link</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plotly_POST</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="o">=</span><span class="s2">"histogram2d/no-binning"</span><span class="p">)</span><span class="w">
</span></code></pre></div>
<iframe src="https://plot.ly/~RPlotBot/3047.embed" width="800" height="600" id="igraph" scrolling="no" seamless="seamless" frameBorder="0"> </iframe>
